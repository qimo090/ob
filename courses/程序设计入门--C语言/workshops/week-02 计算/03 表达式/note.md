---
created: 2024-07-10T22:25
updated: 2024-07-11T23:48
---

## 表达式

- 一个表达式是一系列运算符和算子的组合，用来计算一个值

```c file:表达式
amount = x * (1 + 0.033) * (1 + 0.033) * (1 + 0.033);
total = 57;
count = count + 1;
value = (min / 2) * lastValue;
```

### 运算符

- 运算符（operator）是指进行运算的动作，比如加法运算符“+”，减法运算符
- 算子（operand） 是指参与运算的值，这个值可能是常数，也可能是变量，还可能是一个方法的返回值

![[Drawing 2024-07-10 22.30.00.excalidraw|300]]

## 四则运算

| 四则运算 | C符号 | 意义  |
| :--: | :-: | :-: |
|  +   |  +  |  加  |
|  -   |  -  |  减  |
|  ×   |  *  |  乘  |
|  ÷   |  /  |  除  |
|      |  %  | 取余  |
|  ()  | ()  | 括号  |
`%` 表示取两个数相除以后得余数

> [!QUESTION] 计算时间差
> 输入两个时间，每个时间分别输入小时和分钟的值，然后输出两个时间之间的差，也以几小时几分表示。
> 
> ```c title:计算时间差
> int hour1, minute1;
> int hour2, minute2;
> scanf("%d %d", &hour1, &minute1);
> scanf("%d %d", &hour2, &minute2);
> ```

```c title:A-计算时间差
int hour1, minute1;
int hour2, minute2;

scanf("%d %d", &hour1, &minute1);
scanf("%d %d", &hour2, &minute2);

int t1 = hour1 * 60 + minute1;
int t2 = hour2 * 60 + minute2;

int t = t2 - t1;

printf("时间差是%d小时%d分钟\n", t / 60, t % 60);
```

- `hour1 * 60 + minute1` -> 转换为分钟为单位
- `t / 60` -> 小时部分；`t % 60` -> 分钟部分

## 运算符优先级

> [!QUESTION] 求平均值
> 写一个程序，输入两个整数，输出它们的平均值
> 
> ```c
> int a,b;
> 
> scanf("%d %d", &a, &b);
> 
> double c = (a + b) / 2.0;
> 
> printf("%d和%d的平均值=%f\n", a, b, c);
> ```

### 优先级

| 优先级 | 运算符 |  运算  | 结合关系 |  举例  |
| :-: | :-: | :--: | :--: | :--: |
|  1  |  +  | 单目不变 | 自右向左 | a*+b |
|  1  |  -  | 单目取负 | 自右向左 | a*-b |
|  2  |  *  |  乘   | 自左向右 | a*b  |
|  2  |  /  |  除   | 自左向右 | a/b  |
|  2  |  %  |  取余  | 自左向右 | a%b  |
|  3  |  +  |  加   | 自左向右 | a+b  |
|  3  |  -  |  减   | 自左向右 | a-b  |
|  4  |  =  |  赋值  | 自右向左 | a=b  |

- 一般自左向右
- 单目 `+-` 和赋值 `=` 自右向左
### 赋值运算符

- 赋值也是运算，也有结果
- `a = 6`  的结果是 `a` 被赋予的值，也就是 `6` 
- `a = b = 6`  --> `a = (b = 6)`

### “嵌入式赋值”

```c
int a = 6;
int b;
int c = 1 + (b = a);
```

- 不利于阅读
- 容易产生错误

### 结合关系

```c
result = a = b = 3 + c;
result = 2;
reuslt = (result = result * 2) * 6 * (result = 3 + result);
```


> [!WARNING] `reuslt = (result = result * 2) * 6 * (result = 3 + result);` 
这样的表达式太复杂，不容易阅读和理解，容易造成读程序时的误解。所以，要避免写出这样的复杂表达式来的。这个表达式应该被拆成若干个表达式，然后以明显的正确的顺序来进行计算。

## 交换两个变量


> [!QUESTION] 交换两个变量
> 如果有两个变量 `int a = 6` , `int b = 5` ，如何交换 a、b 两个变量的值？

###  程序是按步执行的

- 程序表达的是顺序执行的动作，而不是关系
- `a = b; b = a;` 是依次执行的，结果使得 a 和 b 都得到 b 原来的值

```c
#include <stdio.h>

int main()
{
  int a = 5;
  int b = 6;
  int t;

  t = a;
  a = b;
  b = t;

  printf("a = %d, b = %d\n", a, b);

  return 0;
}
```

## 复合赋值

5个算术运算符，`+`、`-`、`*`、`/`、`%`，可以和赋值运算符 `=` 结合起来，形成复合赋值运算符`+=`、`-=`、`*=`、`/=`和`%=`

```c
total += 5
# 等价于
total = total + 5
```

注意两个运算符中间不要有空格

## 递增递减运算符

-  “++”和“--”是两个很特殊的运算符，它们是单目运算符，这个算子还必须是变量。这两个运算符分别叫做递增和递减运算符，他们的作用就是给这个变量+1或者-1。

-  `count++;`
-  `count += 1;`
-  `count = count + 1;`

### 前缀后缀

- `++`和`--`可以放在变量的前面，叫做前缀形式，也可以放在变量的后面，叫做后缀形式。
- `a++`的值是 `a` 加 1 以前的值，而`++a`的值是加了 1 以后的值，无论哪个，`a` 自己的值都加了 1 了。

| 表达式       | 运算          | 表达式的值          |
| --------- | ----------- | -------------- |
| `count++` | 给 count 加 1 | count 原来的值     |
| `++count` | 给 count 加 1 | count + 1 以后的值 |
| `count--` | 给 count 减 1 | count 原来的值     |
| `--count` | 给 count 减 1 | count - 1 以后的值 |
