> pnpm 原理

pnpm 是一个 JavaScript 包管理工具，它的原理可以概括为以下几个方面：

1. **硬链接（Hard Linking）**：pnpm 使用硬链接的方式来共享依赖包。当项目 A 和项目 B 都依赖同一个版本的包时，pnpm 会在硬盘上只存储一份该版本的包，并使用硬链接将其链接到两个项目中，以节省磁盘空间。
2. **冗余移除（Pruning）**：pnpm 在安装依赖时，会移除不再需要的依赖包。当一个项目不再依赖某个包时，pnpm 会检测并将该包从硬盘上移除，以避免产生冗余。
3. **压缩存储（Content Addressable Storage）**：pnpm 使用内容可寻址存储（Content Addressable Storage）的方式来存储已下载的依赖包。每个包都会被哈希，并用哈希值作为目录名，这样可以避免重复下载相同的包，同时也方便进行缓存和共享。
4. **并行安装（Parallel Installation）**：pnpm 支持并行安装依赖包。它会同时下载和构建多个包，以加快安装速度，提高效率。
5. **锁定文件（Lockfile）**：pnpm 使用 lockfile 来记录项目的依赖关系和版本信息。这个文件会被锁定，确保在后续安装或构建过程中使用相同的依赖版本。

综上所述，pnpm 通过硬链接、冗余移除、压缩存储、并行安装和锁定文件等机制，实现了高效、可共享的依赖管理方式，有效地减少了磁盘空间占用和重复下载的问题，并提高了安装速度。